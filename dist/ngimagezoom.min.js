!function(o,t,e){"use strict";e.module("imageZoom",[]),e.module("imageZoom").run(["$templateCache",function(o){o.put("zoom.html",'<div class="original">\r\n    <img ng-src="{{src}}"/>\r\n</div>\r\n<div class="zoomed">\r\n    <img/>\r\n</div>\r\n')}]),e.module("imageZoom").directive("zoom",function(){function o(o,t,i){function n(t,e){var i=o.markWidth,n=o.markHeight,r=t-i/2,s=e-n/2;u.css("left",r+"px").css("top",s+"px"),o.$broadcast("mark:moved",[r,s,i,n,a[0].height,a[0].width])}function r(t,e,i,n,r,s){var c=o.zoomLvl;o.$apply(function(){d.css("height",c*n+"px").css("width",c*i+"px"),l.attr("src",o.src).css("height",c*r+"px").css("width",c*s+"px").css("left",-c*t+"px").css("top",-c*e+"px")})}function s(o){h=h||o.target.getBoundingClientRect();var t=o.clientX-h.left,e=o.clientY-h.top;return{X:t,Y:e}}var c=e.element,m=c(t[0].querySelector(".original")),a=m.find("img"),d=c(t[0].querySelector(".zoomed")),l=d.find("img"),u=c("<div></div>").addClass("mark").css("position","absolute").css("height",o.markHeight+"px").css("width",o.markWidth+"px");t.append(u),t.on("mouseenter",function(o){u.removeClass("hide");var t=s(o);n(t.X,t.Y)}).on("mouseleave",function(o){u.addClass("hide")}).on("mousemove",function(o){var t=s(o);n(t.X,t.Y)}),o.$on("mark:moved",function(o,t){r.apply(this,t)});var h;i.$observe("ngSrc",function(t){o.src=i.ngSrc},!0),i.$observe("zoomLvl",function(t){o.zoomLvl=t},!0)}return{restrict:"EA",scope:{markHeight:"@markHeight",markWidth:"@markWidth",src:"@src",zoomLvl:"@zoomLvl"},templateUrl:"zoom.html",link:o}})}(window,document,window.angular);