!function(e,t,n){"use strict";n.module("imageZoom",[]),n.module("imageZoom").run(["$templateCache",function(e){e.put("zoom.html",'<div class="original">\n    <img ng-src="{{imageSrc}}"/>\n    <div class="mark"></div>\n</div>\n<div class="zoomed">\n\n    <img ng-src="{{imageSrc}}"/>\n\n</div>\n')}]),n.module("imageZoom").directive("zoom",["$sce",function(e){function t(e,t,i){function o(t){var n=e.markWidth,i=e.markHeight,o=t.x*d[0].clientWidth-.5*n,r=t.y*d[0].clientHeight-.5*i;v.css("left",o+"px").css("top",r+"px"),e.$broadcast("mark:moved",[t])}function r(t){e.$apply(function(){h.css("left",(g[0].clientWidth-f)*t.x+"px").css("top",(g[0].clientHeight-p)*t.y+"px")})}function c(e){return m=m||e.currentTarget.getBoundingClientRect(),{x:e.clientX-m.left,y:e.clientY-m.top}}function l(e){var t=c(e);return{x:t.x/e.currentTarget.clientWidth,y:t.y/e.currentTarget.clientHeight}}var a,m,u=n.element,d=u(t[0].querySelector(".original")),s=d.find("img"),g=u(t[0].querySelector(".zoomed")),h=g.find("img"),v=u(d[0].querySelector(".mark")),f=s[0].naturalWidth,p=s[0].naturalHeight;f&&p||s[0].addEventListener("load",function(t){f=s[0].naturalWidth,p=s[0].naturalHeight,e.markWidth=g[0].clientWidth/f*d[0].clientWidth,e.markHeight=g[0].clientWidth/p*d[0].clientHeight,v.css("height",e.markHeight+"px").css("width",e.markWidth+"px"),o({x:.5,y:.5})}),a=parseFloat(e.level),e.level=isNaN(a)?1:a,d.on("mouseenter",function(e){v.removeClass("hide"),o(l(e))}).on("mouseleave",function(e){v.addClass("hide")}).on("mousemove",function(e){o(l(e))}),e.$on("mark:moved",function(e,t){r.apply(this,t)}),i.$observe("ngSrc",function(t){e.imageSrc=i.ngSrc},!0),i.$observe("level",function(t){e.level=t},!0)}return{restrict:"EA",scope:{imageSrc:"@zoomImageSrc",level:"@zoomLevel"},templateUrl:"zoom.html",link:t}}])}(window,document,window.angular);